:root{
  --bg:#f5f7fb; --card:#ffffff; --text:#0e1325; --muted:#566272;
  --accent:#0b76d1; --accent-2:#075fa8; --ring:#b7d8ff; --border:#e7edf6;
  --radius:12px; --shadow:0 10px 30px rgba(20,35,60,.08);
  --success:#16a34a; --danger:#dc2626; --font:14px;
}
*{box-sizing:border-box}
html,body{height:100%;margin:0;font-family:Inter,system-ui,Segoe UI,Roboto,Helvetica,Arial;background:var(--bg);color:var(--text);font-size:var(--font);-webkit-font-smoothing:antialiased}
button{font-family:inherit}
:focus-visible{outline:2px solid var(--ring);outline-offset:2px;border-radius:10px}
body.modal-open{overflow:hidden}

.app{display:flex;flex-direction:column;height:100vh}

/* Topbar */
.topbar{display:flex;align-items:center;gap:12px;justify-content:space-between;padding:10px 16px;background:var(--card);box-shadow:var(--shadow);position:sticky;top:0;z-index:30;}
.brand{display:flex;align-items:center;gap:10px}
.logo{width:36px;height:36px;border-radius:9px;background:linear-gradient(135deg,var(--accent),var(--accent-2));display:flex;align-items:center;justify-content:center;color:white;font-weight:800;font-size:14px;box-shadow:0 6px 18px rgba(11,118,209,.25);}
.title{font-weight:700}
.tabs{display:flex;gap:6px;margin-left:8px}
.tab{background:transparent;border:none;padding:7px 12px;border-radius:999px;cursor:pointer;font-weight:600;color:#18324f;transition:all .12s;}
.tab:hover{background:#edf6ff}
.tab.active{background:#e6f0ff;color:var(--accent);box-shadow:inset 0 0 0 1px rgba(11,118,209,0.08)}
.top-actions{margin-left:auto;display:flex;align-items:center;gap:8px}
.countdown{font-variant-numeric:tabular-nums;background:#eff6ff;border-radius:999px;padding:6px 10px;color:#0b4f87;border:1px solid #e0ecff}

/* Hero */
.hero{position:relative;padding:18px 18px 6px 18px}
.hero-bg{position:absolute;inset:0;height:100%;background:radial-gradient(1200px 220px at 30% -60%, rgba(11,118,209,.16), transparent 60%),radial-gradient(800px 200px at 80% -50%, rgba(82,198,255,.15), transparent 55%);pointer-events:none;z-index:0;}
.app-title{position:relative;margin:8px 0 2px 0;font-size:26px;font-weight:800;letter-spacing:.2px;z-index:1}
.subtitle{position:relative;margin:0 0 6px 0;color:var(--muted);line-height:1.55;z-index:1}

/* Layout */
.container{padding:18px;flex:1;overflow:auto}
.panel{background:var(--card);padding:16px;border-radius:var(--radius);box-shadow:var(--shadow)}
.hidden{display:none}
.panel-grid{display:grid;grid-template-columns:1fr 1fr;gap:16px}
.card{background:linear-gradient(180deg,#fff,#fbfdff);border-radius:12px;padding:14px;border:1px solid var(--border);}
.card-head{display:flex;align-items:center;justify-content:space-between;gap:12px}
.pill-group{display:flex;gap:8px;flex-wrap:wrap}
.pill{display:inline-flex;gap:6px;align-items:center;background:#f4f8ff;border:1px solid #e7f0ff;color:#0b4f87;border-radius:999px;padding:4px 8px}
.divider{height:1px;background:var(--border);margin:10px 0}

.input{padding:10px 12px;border-radius:10px;border:1px solid #dfe7f3;background:#fff;transition:box-shadow .12s,border-color .12s;line-height:1.35;}
.input:focus{border-color:#cfe2ff;box-shadow:0 0 0 3px rgba(11,118,209,.1)}
textarea{width:100%;min-height:120px;padding:12px 14px;border-radius:10px;border:1px solid #dfe7f3;resize:none;line-height:1.45;background-clip:padding-box;}
.row{display:flex;gap:10px;justify-content:flex-end;margin-top:10px}
.primary{background:var(--accent);color:white;padding:8px 12px;border-radius:10px;border:none;cursor:pointer;transition:transform .12s, box-shadow .12s;box-shadow:0 8px 18px rgba(11,118,209,.18);}
.primary:hover{transform:translateY(-2px)}
.ghost{background:#f3f5f8;padding:8px 12px;border-radius:10px;border:1px solid #e4e9f2;cursor:pointer}

/* Stats */
.stats{display:grid;grid-template-columns:repeat(4,1fr);gap:12px;margin-bottom:16px}
.stat-card{padding:12px;border:1px solid var(--border);border-radius:12px;background:#ffffff;display:flex;flex-direction:column;gap:2px;box-shadow:0 6px 18px rgba(4,17,37,.04);}
.stat-title{font-size:12px;color:var(--muted)}
.stat-value{font-weight:800;font-size:22px;letter-spacing:.3px}

/* Entries */
.entries{margin-top:8px;border-radius:12px;border:1px dashed #e6eef8;background:#fbfdff;max-height:320px;overflow:auto}
.entries--recent{padding:2px}
.entries--full{padding:6px;max-height:none}
.entry{padding:10px 12px;border-radius:10px;display:flex;justify-content:space-between;gap:10px;align-items:center;border-bottom:1px dashed #e8f1fb;transition:background .08s, transform .08s;}
.entry:hover{background:#f7fbff;transform:translateY(-1px)}
.entry:last-child{border-bottom:none}
.entry .dot{width:8px;height:8px;border-radius:999px;background:#99c8ff;margin-right:6px;box-shadow:0 0 0 2px #e8f3ff inset}
.entry .text{display:flex;align-items:center;gap:8px;font-weight:600}
.ts{font-size:12px;color:var(--muted)}

/* Settings grid */
.settings-grid{display:grid;grid-template-columns:1fr 1fr;gap:14px}
.field{display:flex;flex-direction:column;gap:6px}
.field .label{font-size:13px;color:var(--muted)}
.switch{flex-direction:row;align-items:center;justify-content:space-between}
.switch input{transform:scale(1.1)}

/* Backup */
.backup-row{display:flex;align-items:center;gap:20px;flex-wrap:wrap}
.backup-row .label{font-size:12px;color:var(--muted)}
.backup-actions{margin-left:auto;display:flex;gap:8px}

/* Modal */
.modal{position:fixed; inset:0; display:none; align-items:center; justify-content:center;background:rgba(6,12,20,.38);backdrop-filter: blur(3px);-webkit-backdrop-filter: blur(3px);z-index:1000;padding:24px;}
.modal.open{display:flex}
.modal-card{position:relative; width:560px; max-width:92vw;max-height:88vh; overflow:auto;background:var(--card); padding:22px;border-radius:14px; border:1px solid var(--border);box-shadow:0 40px 80px rgba(2, 6, 23, .35);-webkit-font-smoothing:antialiased; transform:translateZ(0);}
.modal-card #prompt-title{display:block;font-size:16px;line-height:1.35;padding:8px 2px 10px 2px;margin:0 0 8px 0;}
.modal-card textarea{min-height:140px}
.btn-close{position:absolute;right:12px;top:10px;background:transparent;border:none;font-size:16px;cursor:pointer}

/* Toast */
#toast-root{position:fixed;top:18px;right:18px;z-index:1200;display:flex;flex-direction:column;gap:8px}
.toast{min-width:220px;padding:10px 12px;border-radius:10px;color:white;box-shadow:0 10px 30px rgba(2,6,23,.14);display:flex;align-items:center;gap:8px;opacity:0;transform:translateY(-6px);animation:toastIn .18s forwards}
.toast.success{background:var(--success)}
.toast.error{background:var(--danger)}
@keyframes toastIn{to{opacity:1;transform:none}}

.skeleton{height:14px;border-radius:6px;background:linear-gradient(90deg,#f2f6fb,#e9f0f8,#f2f6fb);background-size:200% 100%;animation:s 1.2s infinite}
@keyframes s{0%{background-position:200% 0}100%{background-position:-200% 0}}

/* Dark */
body[data-theme="dark"]{--bg:#0b1220; --card:#0f1628; --text:#e6eef7; --muted:#9aa8bd; --accent:#4aa3ff; --accent-2:#1e7adf; --border:#1b2a44; --ring:#214a85; --shadow:0 10px 30px rgba(0,0,0,0.35);}
body[data-theme="dark"] .tab{color:#c8d9f1}
body[data-theme="dark"] .tab:hover{background:#111e34}
body[data-theme="dark"] .tab.active{background:#0f2544;color:#cfe6ff;box-shadow:none}
body[data-theme="dark"] .countdown{background:#0f2544;color:#cfe6ff;border-color:#0e203a}
body[data-theme="dark"] .card{background:linear-gradient(180deg,#101a2d,#0b1220);border-color:#1b2a44}
body[data-theme="dark"] .entries{background:#0b1220;border-color:#1b2a44}
body[data-theme="dark"] .ghost{background:#132540;color:#dce7f5;border-color:#1d355b}
body[data-theme="dark"] textarea{background:#0b1220;color:#e6eef7;border-color:#1b2a44}
body[data-theme="dark"] .pill{background:#0f2544;border-color:#1d355b;color:#cfe6ff}
body[data-theme="dark"] .hero-bg{opacity:.7}
body[data-theme="dark"] .subtitle{color:#9fb3cc}

/* Compact */
body[data-dense="1"]{--font:13px}
body[data-dense="1"] .panel{padding:12px}
body[data-dense="1"] .panel-grid{gap:12px}
body[data-dense="1"] .primary, body[data-dense="1"] .ghost{padding:6px 10px}
body[data-dense="1"] textarea{min-height:100px}

/* Responsive */
@media(max-width:980px){.panel-grid{grid-template-columns:1fr}.stats{grid-template-columns:repeat(2,1fr)}.app-title{font-size:22px}}
@media(max-width:720px){.tabs{flex-wrap:wrap}.tab{margin-bottom:4px}}
@media(max-width:600px){.top-actions{display:none}.stats{grid-template-columns:1fr}}
@media (prefers-reduced-motion: reduce){*{animation:none!important;transition:none!important}}
